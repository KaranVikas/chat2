import React, { useEffect, useState } from "react";
import { useHistory } from "react-router-dom";
import { ChatState } from "../Context/ChatProvider";
import Login from "./Authentication/Login";
import Signup from "./Authentication/Signup";
import ChatPage from "./ChatPage";

const Homepage = () => {
  const history = useHistory();
  const { user } = ChatState();
  const [showChat, setShowChat] = useState(false);

  useEffect(() => {
    const user = JSON.parse(localStorage.getItem("userInfo"));

    // if (user) history.push("/chats");
  }, [history]);

  useEffect(() => {
    if (user) setShowChat(true);
    else setShowChat(false);
    console.log("user", user);
  }, [user]);

  return showChat ? (
    <ChatPage />
  ) : (
    <div
      className="d-flex justify-content-center align-items-center"
      style={{ height: "100vh", backgroundColor: "#fafafa" }}
    >
      <div
        className="container p-5 mt-5"
        style={{
          border: "1px solid Gray",
          width: "600px",
          backgroundColor: "#ffffff",
        }}
      >
        {/* <div className="d-flex align-items-center justify-content-around">
        <svg
          width="50"
          height="50"
          viewBox="0 0 36 36"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <g clip-path="url(#clip0_59_2)">
            <path
              d="M3.02044 3.05322C4.09066 1.983 5.82982 1.78229 7.10075 2.51811L6.43188 1.71541C5.29471 0.31072 2.95356 0.444479 1.68263 1.71541C0.411704 2.98634 0.277944 5.32749 1.68263 6.46466L2.48533 7.13353C1.74951 5.8626 1.95022 4.12344 3.02044 3.05322Z"
              fill="white"
            />
            <path
              d="M19.141 35.9632C18.9404 35.9632 18.8066 35.8964 18.6728 35.7626L16.7999 33.8897C16.733 33.8228 16.6661 33.7559 16.6661 33.6221C14.5925 27.2675 13.7899 25.1939 12.452 23.1203C10.9136 20.7792 10.3115 17.6353 11.0474 15.2273C11.8501 12.5517 13.8567 10.9463 16.9337 10.7456C19.1411 10.6119 21.4154 11.2807 23.5559 12.6854C25.4957 14.0232 28.0375 14.8259 33.6563 16.632C33.79 16.632 33.8569 16.6989 33.9239 16.7657L35.7968 18.6387C35.9974 18.8393 36.0644 19.1738 35.9306 19.4414C35.7299 19.8427 30.4456 29.2074 19.6093 35.7626C19.4085 35.8964 19.2748 35.9632 19.141 35.9632ZM17.8701 33.02L19.2748 34.4247C28.2381 28.8728 33.2549 21.1805 34.392 19.3075L32.9873 17.9028C27.3685 16.0968 24.7598 15.2272 22.6862 13.8225C20.8801 12.5516 18.8734 11.9496 16.9336 12.1503C14.4587 12.3509 12.9201 13.4881 12.2513 15.6955C11.6493 17.6353 12.1844 20.4447 13.5222 22.4514C14.9269 24.5249 15.7965 26.6655 17.8701 33.02Z"
              fill="black"
            />
            <path
              d="M11.7833 15.6955C11.6496 15.6955 11.4489 15.6286 11.382 15.5617L1.2147 6.93281C0.478882 6.33082 0.0775324 5.39436 0.0106525 4.39102C-0.0562274 3.18697 0.412002 2.04987 1.2147 1.24717C2.0174 0.444473 3.1545 -0.0237567 4.35855 0.0431232C5.36189 0.110003 6.29835 0.511353 6.90041 1.31405L15.4624 11.4145C15.5961 11.6151 15.663 11.8158 15.5961 12.0165C15.5293 12.2171 15.3955 12.4178 15.1948 12.4847C13.857 12.9529 12.9874 13.8894 12.4523 15.2941C12.3854 15.4947 12.1847 15.6285 11.9841 15.6954C11.9172 15.6955 11.8502 15.6955 11.7833 15.6955ZM4.15784 1.38093C3.42202 1.38093 2.68627 1.64852 2.15116 2.18363C1.61605 2.71874 1.28158 3.52144 1.34846 4.32414C1.34846 4.99301 1.61605 5.59507 2.08428 5.92954L11.5827 13.9564C12.1178 12.9531 12.9205 12.1504 13.9239 11.6152L5.897 2.11675C5.49565 1.7154 4.96054 1.44788 4.2916 1.38093C4.22479 1.38093 4.15784 1.38093 4.15784 1.38093Z"
              fill="black"
            />
            <path
              d="M16.7329 6.9328C16.4653 6.9328 16.1978 6.73216 16.0641 6.46457L14.6594 1.84915C14.5256 1.51468 14.7262 1.11334 15.1276 1.04646C15.4621 0.912695 15.8634 1.11334 15.9303 1.51468L17.335 6.06322C17.4687 6.39769 17.2681 6.79904 16.8668 6.86592C16.8668 6.9328 16.7998 6.9328 16.7329 6.9328Z"
              fill="black"
            />
            <path
              d="M24.4253 9.27398C24.2247 9.27398 24.0239 9.2071 23.8902 9.00639C23.6226 8.7388 23.6895 8.27057 23.9571 8.06993L27.7029 4.99296C27.9705 4.72537 28.4387 4.79232 28.6394 5.05984C28.9069 5.32743 28.84 5.79566 28.5725 5.9963L24.8266 9.07327C24.6929 9.20703 24.5591 9.27398 24.4253 9.27398Z"
              fill="black"
            />
            <path
              d="M20.5456 8.06997C20.4788 8.06997 20.4119 8.06997 20.345 8.06997C20.0105 7.93621 19.8099 7.60174 19.8768 7.26727L20.8132 4.05654C20.9469 3.72207 21.2814 3.52143 21.6159 3.58831C22.0841 3.65519 22.2847 4.05654 22.151 4.39101L21.2145 7.60174C21.0807 7.86933 20.8801 8.06997 20.5456 8.06997Z"
              fill="black"
            />
            <path
              d="M6.23109 29.4748C6.09733 29.4748 5.9635 29.4748 5.89662 29.408C5.56215 29.2073 5.49527 28.806 5.69598 28.4715L8.23784 24.3912C8.43848 24.0567 8.83983 23.9898 9.1743 24.1905C9.50877 24.3912 9.57565 24.7925 9.37494 25.127L6.83308 29.2073C6.69932 29.3411 6.49868 29.4748 6.23109 29.4748Z"
              fill="black"
            />
            <path
              d="M5.42843 18.1035C5.36155 18.1035 5.36155 18.1035 5.29467 18.1035L0.545426 17.3677C0.210957 17.3008 -0.056563 16.9663 0.0103169 16.6319C0.0771968 16.2974 0.411667 16.0299 0.746137 16.0967L5.56226 16.7656C5.89673 16.8325 6.16425 17.167 6.09737 17.5014C6.03049 17.836 5.7629 18.1035 5.42843 18.1035Z"
              fill="black"
            />
            <path
              d="M4.09056 23.1202C3.82297 23.1202 3.62233 22.9865 3.48857 22.7189C3.35481 22.3844 3.48857 21.9831 3.82304 21.8493L6.83313 20.4446C7.1676 20.3109 7.56895 20.4446 7.70271 20.7791C7.83647 21.1136 7.70271 21.5149 7.36824 21.6487L4.35815 23.0534C4.29127 23.1202 4.15744 23.1202 4.09056 23.1202Z"
              fill="black"
            />
            <path
              d="M17.0674 24.1237C16.7998 24.1237 16.5991 23.9899 16.4654 23.7223C15.9972 22.7859 15.7965 22.5183 15.4621 22.2508C15.1276 21.9163 14.7262 21.5149 14.1242 20.4447V20.3778C13.9905 19.9765 12.7196 16.7658 13.9236 15.0266C14.1242 14.759 14.5925 14.6921 14.8601 14.8928C15.1277 15.0935 15.1945 15.5617 14.9938 15.8293C14.3918 16.632 14.8601 18.7056 15.3283 19.8427C15.8634 20.7792 16.131 21.0468 16.3985 21.3143C16.733 21.6488 17.1343 22.0501 17.6694 23.1872C17.8032 23.5217 17.6694 23.923 17.335 24.0568C17.268 24.1237 17.1343 24.1237 17.0674 24.1237Z"
              fill="black"
            />
            <path
              d="M28.1043 34.1572C26.432 34.1572 24.8267 33.4214 23.6895 32.2174L23.2213 31.6823L23.7564 31.2141C26.4989 29.0067 28.9738 26.5318 31.1812 23.7893L31.6494 23.2542L32.1845 23.7224C33.3885 24.8595 34.1243 26.4649 34.1243 28.1372C34.1244 31.4816 31.4488 34.1572 28.1043 34.1572ZM25.228 31.816C26.0307 32.4849 27.034 32.8194 28.1043 32.8194C30.713 32.8194 32.7866 30.7458 32.7866 28.1371C32.7866 27.0669 32.4521 26.0635 31.7832 25.2608C29.7765 27.6019 27.5691 29.8093 25.228 31.816Z"
              fill="black"
            />
          </g>
          <defs>
            <clipPath id="clip0_59_2">
              <rect width="36" height="36" fill="white" />
            </clipPath>
          </defs>
        </svg> */}

        <h3
          className="m-3 p-3 mb-4"
          style={{ fontSize: "35px", fontFamily: "cursive" }}
        >
          Ding Dong
        </h3>
        {/* </div> */}
        <ul
          className="nav nav-pills mb-3 justify-content-around"
          id="pills-tab"
          role="tablist"
        >
          <li className="nav-item" role="presentation">
            <button
              //style={{ backgroundColor: "#3339cd" }}
              className=" nav-link active "
              id="pills-home-tab"
              data-bs-toggle="pill"
              data-bs-target="#pills-home"
              type="button"
              role="tab"
              aria-controls="pills-home"
              aria-selected="true"
            >
              Login
            </button>
          </li>
          <li className="nav-item" role="presentation">
            <button
              className="nav-link"
              id="pills-profile-tab"
              data-bs-toggle="pill"
              data-bs-target="#pills-profile"
              type="button"
              role="tab"
              aria-controls="pills-profile"
              aria-selected="false"
            >
              signup
            </button>
          </li>
        </ul>
        <div className="tab-content" id="pills-tabContent">
          <div
            className="tab-pane fade show active"
            id="pills-home"
            role="tabpanel"
            aria-labelledby="pills-home-tab"
            tabIndex="0"
          >
            <Login />
          </div>
          <div
            className="tab-pane fade"
            id="pills-profile"
            role="tabpanel"
            aria-labelledby="pills-profile-tab"
            tabIndex="0"
          >
            <Signup />
          </div>
        </div>
      </div>
    </div>
  );
};

export default Homepage;
